---
title: Remote disk encryption unlock via ssh
date: 2016-06-04 14:47
lang: en
---

The following steps were done with Debian Jessie.

This post is to configure a server unlocking which uses LUKS with LVM.
Usually servers are remote or does not have any monitor or any physical way to enter the key to unlock the disk.
The following steps are to setup a dropbear ssh service on boot, so the user can log in and enter the disk key via ssh.

Configuration

{% highlight bash %}
sudo apt-get install dropbear
{% endhighlight %}

{% highlight bash %}
sudo vi /etc/default/dropbear
{% endhighlight %}

{% highlight bash %}
change NO_START=1 to NO_START=0
{% endhighlight %}

Create your ssh keys for the computer that will log in to unlock the disck if you don't did it before.:

{% highlight bash %}
ssh-keygen
{% endhighlight %}

now copy via scp your public key and append it to the dropbear home.

{% highlight bash %}
cat id_rsa.pub >>/etc/initramfs-tools/root/.ssh/authorized_keys
{% endhighlight %}


References:
http://www.emmolution.org/?p=307
https://gist.github.com/wolli/5295625
https://help.ubuntu.com/community/SSH/OpenSSH/Keys
https://stinkyparkia.wordpress.com/2014/10/14/remote-unlocking-luks-encrypted-lvm-using-dropbear-ssh-in-ubuntu-server-14-04-1-with-static-ipst/
